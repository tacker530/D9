幾つかの用語を定義します。
ポータルとは、特定の緯度、経度、名称を持ちます。
郵便局、石碑、壁画、建物などの場所に設定されます。
同じ座標（緯度、経度）には一つのポータルしか設定できません。

リンクとはポータルとポータルを直線でつないだ線の事です。
リンクは長さの制限はありません。
リンクはほかのリンクと交差することはできません。
ひとつのポータルから複数のリンクを作ることができます。

CF(コントロールフィールド）とは、リンクで三角形が作られる場合に、その領域のことを指します。
CFはより大きいCFの中に作ることが可能です。
CFはすでに作成されているCFのリンクを共有してもかまいません。

CFとCFが重なっている状態を多重CFといいます。
3点のポータルA,B,CがCFを作成してるとします。
ポータルDがこのCFの内側にある場合に、新しいリンクAD,BD,CDの３つのリンクが作成可能です。
この状態でリンクを作成すると、CFはABC以外にADB,BDC,CDAの３つが作られることになります。
つまりCFの内側に1点のポータルがある場合に、３つのCFが追加できることになります。
これはABCと同じ領域をより小さいCFで３つに分割して構成しているため、多重CFと呼びます。

同様にこの分割された３つのCFの内側にそれぞれ一つずつポータルが存在していると、多重CFをさらに分割することができます。
再帰的に分割されたすべてのCFの内側を３つのCFに分ける操作を続けることを全多重を作成すると呼びます。

最初の例のCFの内側にひとつポータルがあり、全部で４つの多重CFが作られれている状態を全2重CFと呼びます。
全2重CFをさらに全多重を作成したものを全3重CFと呼びます。一段階の全多重を増やすごとに全4重、全5重と呼びます。

ポータルの位置をCSVファイルから取得します。
データの並びは、緯度、経度、ポータル名、となっています。

このデータをもとに全多重を検索するプログラムをRubyで作ってください。

ーーーー